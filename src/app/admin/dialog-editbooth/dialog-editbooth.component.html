<div class="loading-shade" *ngIf="isLoading">
  <div
    class="col s12"
    style="
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 10px;
    "
  >
    <span>
      <mat-spinner [diameter]="32" mode="indeterminate"></mat-spinner>
    </span>
  </div>
</div>
<form [formGroup]="editrsvp" (ngSubmit)="onSubmit()">
  <h1 mat-dialog-title class="mattitle">
    {{ addScreen ? "Add Booth" : "Edit Booth" }}
  </h1>
  <div mat-dialog-content class="matbody">
    <mat-tab-group style="height: 500px" [(selectedIndex)]="selectedTab">
      <mat-tab label="Booth">
        <div class="row" style="margin-top: 20px; width: 95%">
          <div class="col-12">
            <mat-form-field style="width: 100%">
              <input
                matInput
                placeholder="Booth Number*"
                type="text"
                maxlength="50"
                required
                formControlName="boothNum"
              />
              <mat-error
                *ngIf="editrsvp.controls.boothNum.hasError('numberOnly')"
                >Only Number is allowed.</mat-error
              >
            </mat-form-field>
          </div>
          <div class="col-12">
            <mat-form-field style="width: 100%">
              <input
                matInput
                placeholder="Name*"
                type="text"
                maxlength="50"
                required
                formControlName="boothName"
              />
              <mat-error
                *ngIf="
                  editrsvp.controls.boothName.hasError('letterAndNumberSpaceOnly')
                "
                >Only alphanumeric is allowed.</mat-error
              >
            </mat-form-field>
          </div>
          <div class="col-12">
            <mat-form-field style="width: 100%">
              <input
                matInput
                placeholder="Secret Digit*"
                type="text"
                maxlength="4"
                required
                formControlName="secretDigit"
              />
              <mat-error
                *ngIf="editrsvp.controls.secretDigit.hasError('numberOnly')"
                >Only Number is allowed.</mat-error
              >
              <mat-error
                *ngIf="editrsvp.controls.secretDigit.hasError('minlength')"
                >Must be 4 digit.</mat-error
              >
            </mat-form-field>
          </div>
          <div class="col-12">
            <mat-form-field style="width: 100%">
              <input
                matInput
                placeholder="Link*"
                type="text"
                maxlength="50"
                required
                formControlName="boothLink"
              />
            </mat-form-field>
          </div>
          <div class="col-12">
            <mat-form-field style="width: 100%">
              <mat-label>Status*</mat-label>
              <mat-select formControlName="status">
                <mat-option value="1">Open</mat-option>
                <mat-option value="0">Closed</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Booth Activties">
        <div class="" style="margin-top: 40px">
          <div class="col-9 input-group">
            <select style="width: 120px; text-align: center" #filtertType>
              <option value="staffId" selected>Staff ID</option>
              <option value="email">Email</option>
            </select>
            <input
              type="text"
              placeholder="Filter Text"
              class="form-control"
              #filterText
            />
            <button
              type="button"
              class="btn btn-info btn-sm"
              style="width: 80px"
              (click)="filter(filterText.value, filtertType.value)"
            >
              Filter
            </button>

            <button
            type="button"
            class="btn btn-warning btn-sm"
            style="width: 80px;margin-left: 10px;"
            (click)="reset(filterText, filtertType)"
          >
            Reset
          </button>
          </div>
        </div>

        <table class="table" style="margin-top: 20px; text-align: center">
          <tr>
            <td>Play Time</td>
            <!-- <td>Name</td> -->
            <td>Staff Id</td>
            <td>Email</td>
            <td>Chance Left</td>
            <td>Status</td>
          </tr>
          <tr *ngFor="let boothActivity of boothActivities; let i = index">
            <td>
              {{
                boothActivity.createdDate
                  ? (boothActivity.createdDate._seconds * 1000
                    | date: "dd-MMM-yyyy hh:mma")
                  : ""
              }}
            </td>
            <!-- <td>
              {{ boothActivity.name }}
            </td> -->
            <td>
              {{ boothActivity.staffId }}
            </td>
            <td>
              {{ boothActivity.email }}
            </td>
            <td>
              {{ boothActivity.chancesLeft }}
            </td>
            <td>
              <select
                (change)="changeBooth(boothActivity.id, $event.target.value)"
                class="custom-select"
                [ngStyle]="{
                  'background-color':
                    boothActivity.status == '1' ? '#C1E1C1' : '#F597B2'
                }"
                [value]="boothActivity.status"
              >
                <option value="0">Cancelled</option>
                <option value="1">Completed</option>
              </select>
            </td>
          </tr>
        </table>
      </mat-tab>
    </mat-tab-group>
  </div>
  <mat-dialog-actions align="center">
    <button type="submit" class="btn btn-info mr-1">
      {{ addScreen ? "Add" : "Update" }}
    </button>
    <button mat-dialog-close type="button" class="btn cancel-button">
      Close
    </button>
  </mat-dialog-actions>
</form>
